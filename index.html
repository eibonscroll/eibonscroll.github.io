<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Resume</title>
<style>
  :root{--fg:#111827;--muted:#6b7280;--accent:#0f766e;--chip:#e5e7eb}
  body{font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:#fff;color:var(--fg);margin:0}
  .page{max-width:900px;margin:40px auto;padding:0 24px 80px}
  header{border-bottom:3px solid var(--chip);padding-bottom:16px;margin-bottom:20px}
  h1{margin:0;font-size:32px}
  .label{color:var(--accent);font-weight:600}
  .contact{color:var(--muted)}
  h2{margin:28px 0 10px;font-size:18px;text-transform:uppercase;color:var(--accent)}
  .item{margin:10px 0 14px}
  .item .hdr{font-weight:650}
  .dates{color:var(--muted);font-size:.95em}
  ul{margin:6px 0 8px 20px}
</style>
</head>
<body>
<div class="page">
  <header>
    <h1 id="name"></h1>
    <div class="label" id="label"></div>
    <div class="contact" id="contact"></div>
  </header>

  <section id="summary"></section>
  <section>
    <h2>Skills</h2>
    <div id="skills"></div>
  </section>
  <section>
    <h2>Experience</h2>
    <div id="work"></div>
  </section>
  <section>
    <h2>Projects</h2>
    <div id="projects"></div>
  </section>
  <section>
    <h2>Education</h2>
    <div id="education"></div>
  </section>
</div>

<script>
(function(){
  const esc = s => String(s ?? '').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  const $ = id => document.getElementById(id);

  fetch('resume.json')               // make sure your JSON file is named resume.json
    .then(r => r.json())
    .then(r => {
      // basics
      $('name').textContent = r.basics?.name ?? '';
      $('label').textContent = r.basics?.label ?? '';
      const email = r.basics?.email ? `<a href="mailto:${esc(r.basics.email)}">${esc(r.basics.email)}</a>` : '';
      const phone = r.basics?.phone ? esc(r.basics.phone) : '';
      const loc = [r.basics?.location?.city, r.basics?.location?.region, r.basics?.location?.countryCode].filter(Boolean).join(', ');
      const profiles = (r.basics?.profiles||[]).map(p => `<a href="${esc(p.url)}" target="_blank" rel="noopener">${esc(p.network)}</a>`).join(' • ');
      $('contact').innerHTML = [email, phone, loc, profiles].filter(Boolean).join(' • ');
      $('summary').innerHTML = r.basics?.summary ? `<p>${esc(r.basics.summary)}</p>` : '';

      // skills
      $('skills').innerHTML = (r.skills||[])
        .map(s => `<div class="item"><span class="hdr">${esc(s.name)}:</span> ${esc((s.keywords||[]).join(', '))}</div>`).join('');

      // work
      $('work').innerHTML = (r.work||[])
        .map(w => `
          <div class="item">
            <div class="hdr">${esc(w.position||'')} @ ${esc(w.name||'')}</div>
            <div class="dates">${esc(w.startDate||'')} – ${esc(w.endDate||'Present')}</div>
            ${w.summary ? `<div>${esc(w.summary)}</div>` : ''}
            ${(w.highlights||[]).length ? `<ul>${w.highlights.map(h=>`<li>${esc(h)}</li>`).join('')}</ul>` : ''}
          </div>`).join('');

      // projects
      $('projects').innerHTML = (r.projects||[])
        .map(p => `
          <div class="item">
            <div class="hdr">${esc(p.name||'')}${p.entity? ' — ' + esc(p.entity):''}</div>
            <div class="dates">${esc(p.startDate||'')} – ${esc(p.endDate||'Present')}</div>
            <div>${[...(p.roles||[])].join(', ')}</div>
            ${p.summary ? `<div>${esc(p.summary)}</div>` : ''}
          </div>`).join('');

      // education
      $('education').innerHTML = (r.education||[])
        .map(e => `
          <div class="item">
            <div class="hdr">${esc(e.institution||'')}</div>
            <div class="dates">${esc(e.startDate||'')} – ${esc(e.endDate||'')}</div>
            <div><em>${esc(e.studyType||'')} — ${esc(e.area||'')}</em></div>
          </div>`).join('');
    })
    .catch(err => {
      document.body.insertAdjacentHTML('beforeend', `<pre style="color:#b91c1c">Failed to load resume.json: ${esc(err)}</pre>`);
    });
})();
</script>
</body>
</html>
